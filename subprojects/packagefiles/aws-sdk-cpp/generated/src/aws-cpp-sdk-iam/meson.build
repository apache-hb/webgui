src = files(
    'source/IAMErrorMarshaller.cpp',
    'source/IAMRequest.cpp',
    'source/IAMEndpointRules.cpp',
    'source/IAMErrors.cpp',
    'source/IAMEndpointProvider.cpp',
    'source/IAMClient.cpp',
    'source/model/GetServiceLastAccessedDetailsWithEntitiesResult.cpp',
    'source/model/UpdateAccountPasswordPolicyRequest.cpp',
    'source/model/DelegationPermission.cpp',
    'source/model/ListSigningCertificatesRequest.cpp',
    'source/model/UploadServerCertificateRequest.cpp',
    'source/model/UpdateUserRequest.cpp',
    'source/model/TagSAMLProviderRequest.cpp',
    'source/model/CreateLoginProfileResult.cpp',
    'source/model/DeleteRolePermissionsBoundaryRequest.cpp',
    'source/model/FeatureType.cpp',
    'source/model/ContextKeyTypeEnum.cpp',
    'source/model/GetContextKeysForCustomPolicyResult.cpp',
    'source/model/DeleteRoleRequest.cpp',
    'source/model/GetServiceLastAccessedDetailsResult.cpp',
    'source/model/StatusType.cpp',
    'source/model/RemoveRoleFromInstanceProfileRequest.cpp',
    'source/model/UntagMFADeviceRequest.cpp',
    'source/model/VirtualMFADevice.cpp',
    'source/model/ListPoliciesResult.cpp',
    'source/model/GetAccountPasswordPolicyResult.cpp',
    'source/model/ListAttachedGroupPoliciesRequest.cpp',
    'source/model/CreateServiceLinkedRoleRequest.cpp',
    'source/model/CreateOpenIDConnectProviderRequest.cpp',
    'source/model/CreateAccessKeyRequest.cpp',
    'source/model/DeleteServiceLinkedRoleRequest.cpp',
    'source/model/CreatePolicyVersionRequest.cpp',
    'source/model/CreateLoginProfileRequest.cpp',
    'source/model/ListPoliciesGrantingServiceAccessResult.cpp',
    'source/model/ListServerCertificateTagsRequest.cpp',
    'source/model/CreateDelegationRequestResult.cpp',
    'source/model/ListRolesRequest.cpp',
    'source/model/GetSAMLProviderRequest.cpp',
    'source/model/DeleteSSHPublicKeyRequest.cpp',
    'source/model/UpdateSAMLProviderRequest.cpp',
    'source/model/CreateInstanceProfileResult.cpp',
    'source/model/SimulateCustomPolicyRequest.cpp',
    'source/model/PermissionsBoundaryAttachmentType.cpp',
    'source/model/GetSSHPublicKeyResult.cpp',
    'source/model/AttachRolePolicyRequest.cpp',
    'source/model/GetServiceLastAccessedDetailsWithEntitiesRequest.cpp',
    'source/model/ResyncMFADeviceRequest.cpp',
    'source/model/ResetServiceSpecificCredentialRequest.cpp',
    'source/model/ServiceSpecificCredential.cpp',
    'source/model/ListOrganizationsFeaturesResult.cpp',
    'source/model/GetOpenIDConnectProviderRequest.cpp',
    'source/model/DetachUserPolicyRequest.cpp',
    'source/model/PolicyEvaluationDecisionType.cpp',
    'source/model/AccessKey.cpp',
    'source/model/GetSSHPublicKeyRequest.cpp',
    'source/model/UserDetail.cpp',
    'source/model/ListGroupsResult.cpp',
    'source/model/GetPolicyVersionResult.cpp',
    'source/model/PolicyGroup.cpp',
    'source/model/ContextEntry.cpp',
    'source/model/DeleteAccountPasswordPolicyRequest.cpp',
    'source/model/UpdateSigningCertificateRequest.cpp',
    'source/model/UploadSigningCertificateResult.cpp',
    'source/model/ListOpenIDConnectProviderTagsRequest.cpp',
    'source/model/ListPoliciesGrantingServiceAccessEntry.cpp',
    'source/model/GetMFADeviceResult.cpp',
    'source/model/CreateUserRequest.cpp',
    'source/model/ReportFormatType.cpp',
    'source/model/PolicyVersion.cpp',
    'source/model/CreatePolicyRequest.cpp',
    'source/model/Role.cpp',
    'source/model/SimulateCustomPolicyResult.cpp',
    'source/model/ListGroupPoliciesResult.cpp',
    'source/model/EnableOrganizationsRootCredentialsManagementRequest.cpp',
    'source/model/DeletePolicyVersionRequest.cpp',
    'source/model/EnableOrganizationsRootSessionsRequest.cpp',
    'source/model/ListRolePoliciesResult.cpp',
    'source/model/GetContextKeysForCustomPolicyRequest.cpp',
    'source/model/CreateUserResult.cpp',
    'source/model/CreateOpenIDConnectProviderResult.cpp',
    'source/model/EnableMFADeviceRequest.cpp',
    'source/model/ListMFADeviceTagsRequest.cpp',
    'source/model/GetServiceLastAccessedDetailsRequest.cpp',
    'source/model/ListPolicyVersionsResult.cpp',
    'source/model/PutUserPermissionsBoundaryRequest.cpp',
    'source/model/ListMFADevicesResult.cpp',
    'source/model/SAMLProviderListEntry.cpp',
    'source/model/ResponseMetadata.cpp',
    'source/model/CreateDelegationRequestRequest.cpp',
    'source/model/RoleUsageType.cpp',
    'source/model/PolicyRole.cpp',
    'source/model/UploadServerCertificateResult.cpp',
    'source/model/AttachGroupPolicyRequest.cpp',
    'source/model/RoleDetail.cpp',
    'source/model/GetUserPolicyRequest.cpp',
    'source/model/PermissionsBoundaryDecisionDetail.cpp',
    'source/model/RoleLastUsed.cpp',
    'source/model/GetUserRequest.cpp',
    'source/model/DeleteSigningCertificateRequest.cpp',
    'source/model/GetLoginProfileRequest.cpp',
    'source/model/DeleteGroupPolicyRequest.cpp',
    'source/model/DeletionTaskStatusType.cpp',
    'source/model/GetServerCertificateResult.cpp',
    'source/model/SigningCertificate.cpp',
    'source/model/ServerCertificateMetadata.cpp',
    'source/model/GenerateCredentialReportResult.cpp',
    'source/model/UntagPolicyRequest.cpp',
    'source/model/PolicyUsageType.cpp',
    'source/model/SimulatePrincipalPolicyResult.cpp',
    'source/model/ListInstanceProfilesForRoleRequest.cpp',
    'source/model/GetCredentialReportRequest.cpp',
    'source/model/CreateServiceLinkedRoleResult.cpp',
    'source/model/Policy.cpp',
    'source/model/SortKeyType.cpp',
    'source/model/CreateSAMLProviderRequest.cpp',
    'source/model/GetUserPolicyResult.cpp',
    'source/model/UploadSigningCertificateRequest.cpp',
    'source/model/GenerateOrganizationsAccessReportRequest.cpp',
    'source/model/DisableOrganizationsRootCredentialsManagementRequest.cpp',
    'source/model/GetContextKeysForPrincipalPolicyResult.cpp',
    'source/model/PolicyUser.cpp',
    'source/model/ListUsersRequest.cpp',
    'source/model/ListOrganizationsFeaturesRequest.cpp',
    'source/model/ListUserTagsRequest.cpp',
    'source/model/TagMFADeviceRequest.cpp',
    'source/model/ListAttachedRolePoliciesRequest.cpp',
    'source/model/GetRoleResult.cpp',
    'source/model/JobStatusType.cpp',
    'source/model/DeleteOpenIDConnectProviderRequest.cpp',
    'source/model/TagServerCertificateRequest.cpp',
    'source/model/CreateGroupResult.cpp',
    'source/model/GetGroupPolicyResult.cpp',
    'source/model/GetOpenIDConnectProviderResult.cpp',
    'source/model/ListSSHPublicKeysRequest.cpp',
    'source/model/DeletePolicyRequest.cpp',
    'source/model/ListAccountAliasesRequest.cpp',
    'source/model/GetAccountSummaryRequest.cpp',
    'source/model/ResourceSpecificResult.cpp',
    'source/model/GetOrganizationsAccessReportResult.cpp',
    'source/model/ListInstanceProfilesForRoleResult.cpp',
    'source/model/ListPoliciesGrantingServiceAccessRequest.cpp',
    'source/model/AddClientIDToOpenIDConnectProviderRequest.cpp',
    'source/model/ListUsersResult.cpp',
    'source/model/ListRoleTagsRequest.cpp',
    'source/model/CreateRoleResult.cpp',
    'source/model/ListServerCertificateTagsResult.cpp',
    'source/model/GroupDetail.cpp',
    'source/model/AttachUserPolicyRequest.cpp',
    'source/model/LoginProfile.cpp',
    'source/model/OpenIDConnectProviderListEntry.cpp',
    'source/model/SSHPublicKey.cpp',
    'source/model/PutUserPolicyRequest.cpp',
    'source/model/InstanceProfile.cpp',
    'source/model/GetPolicyRequest.cpp',
    'source/model/User.cpp',
    'source/model/AccessKeyMetadata.cpp',
    'source/model/DeleteServerCertificateRequest.cpp',
    'source/model/GetServiceLinkedRoleDeletionStatusResult.cpp',
    'source/model/GetAccountAuthorizationDetailsResult.cpp',
    'source/model/ListInstanceProfileTagsRequest.cpp',
    'source/model/GetServiceLinkedRoleDeletionStatusRequest.cpp',
    'source/model/CreateRoleRequest.cpp',
    'source/model/ListSAMLProviderTagsRequest.cpp',
    'source/model/PutRolePermissionsBoundaryRequest.cpp',
    'source/model/ListAccessKeysRequest.cpp',
    'source/model/GenerateServiceLastAccessedDetailsRequest.cpp',
    'source/model/ListOpenIDConnectProvidersRequest.cpp',
    'source/model/PolicyGrantingServiceAccess.cpp',
    'source/model/UpdateGroupRequest.cpp',
    'source/model/DisableOrganizationsRootSessionsResult.cpp',
    'source/model/GetRolePolicyResult.cpp',
    'source/model/UploadSSHPublicKeyResult.cpp',
    'source/model/UpdateRoleDescriptionResult.cpp',
    'source/model/SSHPublicKeyMetadata.cpp',
    'source/model/RemoveUserFromGroupRequest.cpp',
    'source/model/CreatePolicyResult.cpp',
    'source/model/PolicyOwnerEntityType.cpp',
    'source/model/GetAccountSummaryResult.cpp',
    'source/model/AttachedPolicy.cpp',
    'source/model/ListServerCertificatesResult.cpp',
    'source/model/EntityInfo.cpp',
    'source/model/ListEntitiesForPolicyRequest.cpp',
    'source/model/TagOpenIDConnectProviderRequest.cpp',
    'source/model/ListInstanceProfileTagsResult.cpp',
    'source/model/DeleteServiceLinkedRoleResult.cpp',
    'source/model/PolicyDetail.cpp',
    'source/model/DetachRolePolicyRequest.cpp',
    'source/model/DetachGroupPolicyRequest.cpp',
    'source/model/PolicyScopeType.cpp',
    'source/model/ListPolicyVersionsRequest.cpp',
    'source/model/DeleteRolePolicyRequest.cpp',
    'source/model/PolicyParameterTypeEnum.cpp',
    'source/model/ListEntitiesForPolicyResult.cpp',
    'source/model/ListRoleTagsResult.cpp',
    'source/model/DeactivateMFADeviceRequest.cpp',
    'source/model/AssertionEncryptionModeType.cpp',
    'source/model/GetRoleRequest.cpp',
    'source/model/AccessDetail.cpp',
    'source/model/ListPolicyTagsResult.cpp',
    'source/model/ListVirtualMFADevicesResult.cpp',
    'source/model/UpdateServerCertificateRequest.cpp',
    'source/model/Group.cpp',
    'source/model/CreateInstanceProfileRequest.cpp',
    'source/model/PolicySourceType.cpp',
    'source/model/PutGroupPolicyRequest.cpp',
    'source/model/ListOpenIDConnectProvidersResult.cpp',
    'source/model/GetAccessKeyLastUsedRequest.cpp',
    'source/model/TagRoleRequest.cpp',
    'source/model/PutRolePolicyRequest.cpp',
    'source/model/GetAccountAuthorizationDetailsRequest.cpp',
    'source/model/ListOpenIDConnectProviderTagsResult.cpp',
    'source/model/GetUserResult.cpp',
    'source/model/UntagServerCertificateRequest.cpp',
    'source/model/UpdateRoleDescriptionRequest.cpp',
    'source/model/EncodingType.cpp',
    'source/model/GetGroupPolicyRequest.cpp',
    'source/model/AddUserToGroupRequest.cpp',
    'source/model/CreateAccountAliasRequest.cpp',
    'source/model/PolicyParameter.cpp',
    'source/model/UpdateRoleResult.cpp',
    'source/model/SAMLPrivateKey.cpp',
    'source/model/SetSecurityTokenServicePreferencesRequest.cpp',
    'source/model/ListAccountAliasesResult.cpp',
    'source/model/CreateServiceSpecificCredentialRequest.cpp',
    'source/model/DeleteSAMLProviderRequest.cpp',
    'source/model/ServerCertificate.cpp',
    'source/model/UpdateSSHPublicKeyRequest.cpp',
    'source/model/ListInstanceProfilesResult.cpp',
    'source/model/UpdateRoleRequest.cpp',
    'source/model/UntagUserRequest.cpp',
    'source/model/DeleteAccountAliasRequest.cpp',
    'source/model/UploadSSHPublicKeyRequest.cpp',
    'source/model/EvaluationResult.cpp',
    'source/model/ChangePasswordRequest.cpp',
    'source/model/GetInstanceProfileResult.cpp',
    'source/model/UpdateServiceSpecificCredentialRequest.cpp',
    'source/model/GetCredentialReportResult.cpp',
    'source/model/UntagSAMLProviderRequest.cpp',
    'source/model/ListServiceSpecificCredentialsRequest.cpp',
    'source/model/CreateAccessKeyResult.cpp',
    'source/model/PasswordPolicy.cpp',
    'source/model/DeleteVirtualMFADeviceRequest.cpp',
    'source/model/EnableOrganizationsRootSessionsResult.cpp',
    'source/model/TagInstanceProfileRequest.cpp',
    'source/model/ListUserTagsResult.cpp',
    'source/model/UpdateOpenIDConnectProviderThumbprintRequest.cpp',
    'source/model/GenerateCredentialReportRequest.cpp',
    'source/model/CreateVirtualMFADeviceRequest.cpp',
    'source/model/ListSigningCertificatesResult.cpp',
    'source/model/ListVirtualMFADevicesRequest.cpp',
    'source/model/ListSAMLProviderTagsResult.cpp',
    'source/model/OrganizationsDecisionDetail.cpp',
    'source/model/GetMFADeviceRequest.cpp',
    'source/model/GetAccessKeyLastUsedResult.cpp',
    'source/model/ListGroupsRequest.cpp',
    'source/model/EntityDetails.cpp',
    'source/model/ManagedPolicyDetail.cpp',
    'source/model/GetGroupResult.cpp',
    'source/model/DeleteUserRequest.cpp',
    'source/model/ServiceLastAccessed.cpp',
    'source/model/SimulatePrincipalPolicyRequest.cpp',
    'source/model/UpdateLoginProfileRequest.cpp',
    'source/model/GenerateOrganizationsAccessReportResult.cpp',
    'source/model/GetSAMLProviderResult.cpp',
    'source/model/MFADevice.cpp',
    'source/model/AddRoleToInstanceProfileRequest.cpp',
    'source/model/DeleteLoginProfileRequest.cpp',
    'source/model/ListUserPoliciesRequest.cpp',
    'source/model/DeleteServiceSpecificCredentialRequest.cpp',
    'source/model/ListMFADeviceTagsResult.cpp',
    'source/model/TrackedActionLastAccessed.cpp',
    'source/model/ListRolesResult.cpp',
    'source/model/GetPolicyVersionRequest.cpp',
    'source/model/ResetServiceSpecificCredentialResult.cpp',
    'source/model/ServiceSpecificCredentialMetadata.cpp',
    'source/model/UpdateAssumeRolePolicyRequest.cpp',
    'source/model/CreateServiceSpecificCredentialResult.cpp',
    'source/model/GetLoginProfileResult.cpp',
    'source/model/ListAttachedUserPoliciesRequest.cpp',
    'source/model/UpdateSAMLProviderResult.cpp',
    'source/model/GetAccountPasswordPolicyRequest.cpp',
    'source/model/ListInstanceProfilesRequest.cpp',
    'source/model/DisableOrganizationsRootSessionsRequest.cpp',
    'source/model/AttachedPermissionsBoundary.cpp',
    'source/model/UpdateAccessKeyRequest.cpp',
    'source/model/AccessAdvisorUsageGranularityType.cpp',
    'source/model/DeleteInstanceProfileRequest.cpp',
    'source/model/ListPoliciesRequest.cpp',
    'source/model/GetOrganizationsAccessReportRequest.cpp',
    'source/model/ListMFADevicesRequest.cpp',
    'source/model/GetContextKeysForPrincipalPolicyRequest.cpp',
    'source/model/UntagInstanceProfileRequest.cpp',
    'source/model/CreateVirtualMFADeviceResult.cpp',
    'source/model/DisableOrganizationsRootCredentialsManagementResult.cpp',
    'source/model/ListGroupsForUserResult.cpp',
    'source/model/SummaryKeyType.cpp',
    'source/model/ListUserPoliciesResult.cpp',
    'source/model/EntityType.cpp',
    'source/model/ListSAMLProvidersResult.cpp',
    'source/model/AssignmentStatusType.cpp',
    'source/model/EnableOrganizationsRootCredentialsManagementResult.cpp',
    'source/model/ListSSHPublicKeysResult.cpp',
    'source/model/SetDefaultPolicyVersionRequest.cpp',
    'source/model/UntagOpenIDConnectProviderRequest.cpp',
    'source/model/ListAccessKeysResult.cpp',
    'source/model/ListGroupPoliciesRequest.cpp',
    'source/model/TagPolicyRequest.cpp',
    'source/model/GetRolePolicyRequest.cpp',
    'source/model/DeletionTaskFailureReasonType.cpp',
    'source/model/CreatePolicyVersionResult.cpp',
    'source/model/ListGroupsForUserRequest.cpp',
    'source/model/ListServiceSpecificCredentialsResult.cpp',
    'source/model/ListRolePoliciesRequest.cpp',
    'source/model/CreateGroupRequest.cpp',
    'source/model/TagUserRequest.cpp',
    'source/model/DeleteAccessKeyRequest.cpp',
    'source/model/DeleteUserPermissionsBoundaryRequest.cpp',
    'source/model/GenerateServiceLastAccessedDetailsResult.cpp',
    'source/model/UntagRoleRequest.cpp',
    'source/model/GetPolicyResult.cpp',
    'source/model/DeleteUserPolicyRequest.cpp',
    'source/model/Position.cpp',
    'source/model/GlobalEndpointTokenVersion.cpp',
    'source/model/Statement.cpp',
    'source/model/DeleteGroupRequest.cpp',
    'source/model/ReportStateType.cpp',
    'source/model/PolicyType.cpp',
    'source/model/CreateSAMLProviderResult.cpp',
    'source/model/GetInstanceProfileRequest.cpp',
    'source/model/ListAttachedUserPoliciesResult.cpp',
    'source/model/ListPolicyTagsRequest.cpp',
    'source/model/GetGroupRequest.cpp',
    'source/model/Tag.cpp',
    'source/model/ErrorDetails.cpp',
    'source/model/ListSAMLProvidersRequest.cpp',
    'source/model/AccessKeyLastUsed.cpp',
    'source/model/ListServerCertificatesRequest.cpp',
    'source/model/ListAttachedGroupPoliciesResult.cpp',
    'source/model/GetServerCertificateRequest.cpp',
    'source/model/RemoveClientIDFromOpenIDConnectProviderRequest.cpp',
    'source/model/ListAttachedRolePoliciesResult.cpp'
)

inc = include_directories('include')

if host_machine.system() == 'windows' and get_option('default_library') == 'shared'
    cpp_args = ['-DAWS_IAM_EXPORTS=1']
else
    cpp_args = []
endif

libaws_cpp_sdk_iam = library(
    'aws-cpp-sdk-iam',
    src,
    include_directories: inc,
    cpp_args: cpp_args + public_cpp_args,
    dependencies: [aws_cpp_sdk_core_dep],
    install: true,
    version: meson.project_version(),
)

aws_cpp_sdk_iam_dep = declare_dependency(
    include_directories: inc,
    link_with: libaws_cpp_sdk_iam,
    dependencies: [aws_cpp_sdk_core_dep],
    compile_args: public_cpp_args,
)

meson.override_dependency('aws-cpp-sdk-iam', aws_cpp_sdk_iam_dep)

pkgs += {
    'aws-cpp-sdk-iam': {
        'lib': libaws_cpp_sdk_iam,
        'extra_cflags': public_cpp_args,
    }
}
