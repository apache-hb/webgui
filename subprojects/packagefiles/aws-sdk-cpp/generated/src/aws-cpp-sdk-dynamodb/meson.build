src = files(
    'source/DynamoDBEndpointRules.cpp',
    'source/DynamoDBErrorMarshaller.cpp',
    'source/DynamoDBClient.cpp',
    'source/DynamoDBErrors.cpp',
    'source/DynamoDBClientConfiguration.cpp',
    'source/DynamoDBEndpointProvider.cpp',
    'source/DynamoDBRequest.cpp',
    'source/model/PutItemRequest.cpp',
    'source/model/UpdateGlobalTableRequest.cpp',
    'source/model/ReplicaGlobalSecondaryIndexAutoScalingDescription.cpp',
    'source/model/DescribeLimitsRequest.cpp',
    'source/model/GlobalSecondaryIndexAutoScalingUpdate.cpp',
    'source/model/ListGlobalTablesRequest.cpp',
    'source/model/ListExportsResult.cpp',
    'source/model/OnDemandThroughput.cpp',
    'source/model/BillingMode.cpp',
    'source/model/PutResourcePolicyResult.cpp',
    'source/model/Delete.cpp',
    'source/model/DescribeContributorInsightsRequest.cpp',
    'source/model/BatchGetItemResult.cpp',
    'source/model/Projection.cpp',
    'source/model/BatchWriteItemResult.cpp',
    'source/model/TableClass.cpp',
    'source/model/DescribeEndpointsResult.cpp',
    'source/model/DescribeImportResult.cpp',
    'source/model/ReplicaGlobalSecondaryIndex.cpp',
    'source/model/Update.cpp',
    'source/model/TransactionCanceledException.cpp',
    'source/model/CreateBackupResult.cpp',
    'source/model/TransactGetItemsResult.cpp',
    'source/model/Replica.cpp',
    'source/model/ExecuteTransactionRequest.cpp',
    'source/model/GlobalTableDescription.cpp',
    'source/model/ReturnValuesOnConditionCheckFailure.cpp',
    'source/model/ListImportsResult.cpp',
    'source/model/ContributorInsightsMode.cpp',
    'source/model/UpdateContributorInsightsRequest.cpp',
    'source/model/ImportSummary.cpp',
    'source/model/TableDescription.cpp',
    'source/model/PointInTimeRecoveryStatus.cpp',
    'source/model/CreateTableResult.cpp',
    'source/model/UpdateKinesisStreamingConfiguration.cpp',
    'source/model/BackupStatus.cpp',
    'source/model/UpdateContinuousBackupsResult.cpp',
    'source/model/UpdateGlobalSecondaryIndexAction.cpp',
    'source/model/OnDemandThroughputOverride.cpp',
    'source/model/ProvisionedThroughputOverride.cpp',
    'source/model/InputFormat.cpp',
    'source/model/ReplicaSettingsDescription.cpp',
    'source/model/ContinuousBackupsDescription.cpp',
    'source/model/UpdateTableRequest.cpp',
    'source/model/ReplicaDescription.cpp',
    'source/model/QueryRequest.cpp',
    'source/model/ContributorInsightsAction.cpp',
    'source/model/DescribeLimitsResult.cpp',
    'source/model/AttributeValue.cpp',
    'source/model/InputFormatOptions.cpp',
    'source/model/DeleteReplicaAction.cpp',
    'source/model/UpdateContributorInsightsResult.cpp',
    'source/model/ThrottlingException.cpp',
    'source/model/ReplicaGlobalSecondaryIndexDescription.cpp',
    'source/model/EnableKinesisStreamingDestinationRequest.cpp',
    'source/model/Put.cpp',
    'source/model/EnableKinesisStreamingDestinationResult.cpp',
    'source/model/AutoScalingTargetTrackingScalingPolicyConfigurationDescription.cpp',
    'source/model/DescribeContinuousBackupsRequest.cpp',
    'source/model/UpdateItemResult.cpp',
    'source/model/SSEType.cpp',
    'source/model/PutItemResult.cpp',
    'source/model/TableCreationParameters.cpp',
    'source/model/GlobalSecondaryIndexUpdate.cpp',
    'source/model/TransactGetItem.cpp',
    'source/model/TagResourceRequest.cpp',
    'source/model/ScalarAttributeType.cpp',
    'source/model/DescribeExportRequest.cpp',
    'source/model/ExecuteStatementResult.cpp',
    'source/model/WitnessStatus.cpp',
    'source/model/DescribeTableReplicaAutoScalingRequest.cpp',
    'source/model/DescribeGlobalTableSettingsRequest.cpp',
    'source/model/UpdateGlobalTableResult.cpp',
    'source/model/ScanResult.cpp',
    'source/model/SourceTableFeatureDetails.cpp',
    'source/model/GetResourcePolicyRequest.cpp',
    'source/model/BatchExecuteStatementResult.cpp',
    'source/model/GlobalTableGlobalSecondaryIndexSettingsUpdate.cpp',
    'source/model/RestoreSummary.cpp',
    'source/model/ListGlobalTablesResult.cpp',
    'source/model/GlobalTableStatus.cpp',
    'source/model/DescribeTableRequest.cpp',
    'source/model/DescribeKinesisStreamingDestinationResult.cpp',
    'source/model/KeySchemaElement.cpp',
    'source/model/BatchStatementErrorCodeEnum.cpp',
    'source/model/DescribeContributorInsightsResult.cpp',
    'source/model/Get.cpp',
    'source/model/Select.cpp',
    'source/model/BatchStatementRequest.cpp',
    'source/model/IndexStatus.cpp',
    'source/model/AttributeValueValue.cpp',
    'source/model/PutRequest.cpp',
    'source/model/TimeToLiveSpecification.cpp',
    'source/model/TableClassSummary.cpp',
    'source/model/StreamViewType.cpp',
    'source/model/LocalSecondaryIndexDescription.cpp',
    'source/model/TableWarmThroughputDescription.cpp',
    'source/model/RestoreTableFromBackupResult.cpp',
    'source/model/ImportTableRequest.cpp',
    'source/model/ReplicationGroupUpdate.cpp',
    'source/model/DescribeBackupRequest.cpp',
    'source/model/DeleteBackupRequest.cpp',
    'source/model/ExecuteTransactionResult.cpp',
    'source/model/ExecuteStatementRequest.cpp',
    'source/model/DescribeGlobalTableRequest.cpp',
    'source/model/ExportSummary.cpp',
    'source/model/Condition.cpp',
    'source/model/ReplicaGlobalSecondaryIndexSettingsDescription.cpp',
    'source/model/ContinuousBackupsStatus.cpp',
    'source/model/UpdateKinesisStreamingDestinationRequest.cpp',
    'source/model/DeleteItemRequest.cpp',
    'source/model/RestoreTableToPointInTimeRequest.cpp',
    'source/model/ReplicaAutoScalingDescription.cpp',
    'source/model/BackupDetails.cpp',
    'source/model/ConditionCheck.cpp',
    'source/model/GetResourcePolicyResult.cpp',
    'source/model/AutoScalingPolicyUpdate.cpp',
    'source/model/ParameterizedStatement.cpp',
    'source/model/Endpoint.cpp',
    'source/model/ListTablesResult.cpp',
    'source/model/DescribeEndpointsRequest.cpp',
    'source/model/IncrementalExportSpecification.cpp',
    'source/model/ProjectionType.cpp',
    'source/model/GlobalTableWitnessDescription.cpp',
    'source/model/BatchGetItemRequest.cpp',
    'source/model/GlobalSecondaryIndexInfo.cpp',
    'source/model/TableStatus.cpp',
    'source/model/ComparisonOperator.cpp',
    'source/model/ImportStatus.cpp',
    'source/model/BillingModeSummary.cpp',
    'source/model/UpdateGlobalTableSettingsRequest.cpp',
    'source/model/ListBackupsRequest.cpp',
    'source/model/AutoScalingSettingsUpdate.cpp',
    'source/model/GlobalTableWitnessGroupUpdate.cpp',
    'source/model/DeleteResourcePolicyResult.cpp',
    'source/model/WriteRequest.cpp',
    'source/model/ListContributorInsightsRequest.cpp',
    'source/model/UpdateTableReplicaAutoScalingResult.cpp',
    'source/model/BackupSummary.cpp',
    'source/model/SSEStatus.cpp',
    'source/model/UpdateReplicationGroupMemberAction.cpp',
    'source/model/DeleteResourcePolicyRequest.cpp',
    'source/model/RequestLimitExceeded.cpp',
    'source/model/UpdateTableReplicaAutoScalingRequest.cpp',
    'source/model/ThrottlingReason.cpp',
    'source/model/ExportViewType.cpp',
    'source/model/ArchivalSummary.cpp',
    'source/model/CreateGlobalTableRequest.cpp',
    'source/model/ExpectedAttributeValue.cpp',
    'source/model/CreateBackupRequest.cpp',
    'source/model/DeleteRequest.cpp',
    'source/model/BatchStatementError.cpp',
    'source/model/ExportTableToPointInTimeResult.cpp',
    'source/model/BackupTypeFilter.cpp',
    'source/model/BatchStatementResponse.cpp',
    'source/model/BackupDescription.cpp',
    'source/model/QueryResult.cpp',
    'source/model/UpdateKinesisStreamingDestinationResult.cpp',
    'source/model/KeyType.cpp',
    'source/model/ListContributorInsightsResult.cpp',
    'source/model/ListExportsRequest.cpp',
    'source/model/ReplicaGlobalSecondaryIndexAutoScalingUpdate.cpp',
    'source/model/CreateReplicationGroupMemberAction.cpp',
    'source/model/GlobalSecondaryIndexWarmThroughputDescription.cpp',
    'source/model/ExportTableToPointInTimeRequest.cpp',
    'source/model/DisableKinesisStreamingDestinationRequest.cpp',
    'source/model/ReplicaUpdate.cpp',
    'source/model/ProvisionedThroughput.cpp',
    'source/model/InputCompressionType.cpp',
    'source/model/ListTablesRequest.cpp',
    'source/model/ReplicaStatus.cpp',
    'source/model/EnableKinesisStreamingConfiguration.cpp',
    'source/model/ExportFormat.cpp',
    'source/model/ReturnValue.cpp',
    'source/model/ProvisionedThroughputDescription.cpp',
    'source/model/ExportDescription.cpp',
    'source/model/AttributeAction.cpp',
    'source/model/CreateGlobalSecondaryIndexAction.cpp',
    'source/model/TransactWriteItemsRequest.cpp',
    'source/model/GlobalSecondaryIndex.cpp',
    'source/model/DeleteGlobalTableWitnessGroupMemberAction.cpp',
    'source/model/ReplicaSettingsUpdate.cpp',
    'source/model/RestoreTableFromBackupRequest.cpp',
    'source/model/PointInTimeRecoveryDescription.cpp',
    'source/model/DeleteTableRequest.cpp',
    'source/model/Capacity.cpp',
    'source/model/ReturnItemCollectionMetrics.cpp',
    'source/model/DescribeTableResult.cpp',
    'source/model/TransactWriteItemsResult.cpp',
    'source/model/DescribeBackupResult.cpp',
    'source/model/GlobalSecondaryIndexDescription.cpp',
    'source/model/CreateTableRequest.cpp',
    'source/model/ContributorInsightsSummary.cpp',
    'source/model/SSEDescription.cpp',
    'source/model/SSESpecification.cpp',
    'source/model/CreateGlobalTableWitnessGroupMemberAction.cpp',
    'source/model/ItemResponse.cpp',
    'source/model/ListBackupsResult.cpp',
    'source/model/GetItemRequest.cpp',
    'source/model/AutoScalingPolicyDescription.cpp',
    'source/model/DescribeTableReplicaAutoScalingResult.cpp',
    'source/model/UntagResourceRequest.cpp',
    'source/model/ListTagsOfResourceResult.cpp',
    'source/model/S3SseAlgorithm.cpp',
    'source/model/ImportTableDescription.cpp',
    'source/model/DescribeGlobalTableSettingsResult.cpp',
    'source/model/DisableKinesisStreamingDestinationResult.cpp',
    'source/model/ContributorInsightsStatus.cpp',
    'source/model/DescribeExportResult.cpp',
    'source/model/BackupType.cpp',
    'source/model/UpdateGlobalTableSettingsResult.cpp',
    'source/model/ScanRequest.cpp',
    'source/model/UpdateTimeToLiveRequest.cpp',
    'source/model/CsvOptions.cpp',
    'source/model/ProvisionedThroughputExceededException.cpp',
    'source/model/ExportStatus.cpp',
    'source/model/DestinationStatus.cpp',
    'source/model/DescribeGlobalTableResult.cpp',
    'source/model/TableAutoScalingDescription.cpp',
    'source/model/DescribeTimeToLiveResult.cpp',
    'source/model/S3BucketSource.cpp',
    'source/model/TransactWriteItem.cpp',
    'source/model/FailureException.cpp',
    'source/model/RestoreTableToPointInTimeResult.cpp',
    'source/model/UpdateTableResult.cpp',
    'source/model/DeleteReplicationGroupMemberAction.cpp',
    'source/model/ExportType.cpp',
    'source/model/AttributeValueUpdate.cpp',
    'source/model/CancellationReason.cpp',
    'source/model/PutResourcePolicyRequest.cpp',
    'source/model/UpdateContinuousBackupsRequest.cpp',
    'source/model/DescribeKinesisStreamingDestinationRequest.cpp',
    'source/model/AttributeDefinition.cpp',
    'source/model/TimeToLiveStatus.cpp',
    'source/model/ConditionalOperator.cpp',
    'source/model/KinesisDataStreamDestination.cpp',
    'source/model/BatchWriteItemRequest.cpp',
    'source/model/LocalSecondaryIndexInfo.cpp',
    'source/model/DescribeTimeToLiveRequest.cpp',
    'source/model/DeleteItemResult.cpp',
    'source/model/ReplicaAutoScalingUpdate.cpp',
    'source/model/UpdateItemRequest.cpp',
    'source/model/CreateGlobalTableResult.cpp',
    'source/model/ConsumedCapacity.cpp',
    'source/model/ReturnConsumedCapacity.cpp',
    'source/model/UpdateTimeToLiveResult.cpp',
    'source/model/PointInTimeRecoverySpecification.cpp',
    'source/model/AutoScalingSettingsDescription.cpp',
    'source/model/DeleteBackupResult.cpp',
    'source/model/GetItemResult.cpp',
    'source/model/GlobalTable.cpp',
    'source/model/StreamSpecification.cpp',
    'source/model/TimeToLiveDescription.cpp',
    'source/model/ReplicaGlobalSecondaryIndexSettingsUpdate.cpp',
    'source/model/ApproximateCreationDateTimePrecision.cpp',
    'source/model/AutoScalingTargetTrackingScalingPolicyConfigurationUpdate.cpp',
    'source/model/TransactGetItemsRequest.cpp',
    'source/model/DeleteGlobalSecondaryIndexAction.cpp',
    'source/model/CreateReplicaAction.cpp',
    'source/model/ImportTableResult.cpp',
    'source/model/SourceTableDetails.cpp',
    'source/model/DeleteTableResult.cpp',
    'source/model/KeysAndAttributes.cpp',
    'source/model/DescribeImportRequest.cpp',
    'source/model/ListImportsRequest.cpp',
    'source/model/LocalSecondaryIndex.cpp',
    'source/model/Tag.cpp',
    'source/model/MultiRegionConsistency.cpp',
    'source/model/BatchExecuteStatementRequest.cpp',
    'source/model/ItemCollectionMetrics.cpp',
    'source/model/DescribeContinuousBackupsResult.cpp',
    'source/model/ConditionalCheckFailedException.cpp',
    'source/model/ListTagsOfResourceRequest.cpp',
    'source/model/WarmThroughput.cpp'
)

inc = include_directories('include')

if host_machine.system() == 'windows' and get_option('default_library') == 'shared'
    cpp_args = ['-DAWS_DYNAMODB_EXPORTS=1']
else
    cpp_args = []
endif

libaws_cpp_sdk_dynamodb = library(
    'aws-cpp-sdk-dynamodb',
    src,
    include_directories: inc,
    cpp_args: cpp_args + public_cpp_args,
    dependencies: [aws_cpp_sdk_core_dep],
    install: true,
    version: meson.project_version(),
)

aws_cpp_sdk_dynamodb_dep = declare_dependency(
    include_directories: inc,
    link_with: libaws_cpp_sdk_dynamodb,
    dependencies: [aws_cpp_sdk_core_dep],
    compile_args: public_cpp_args,
)

meson.override_dependency('aws-cpp-sdk-dynamodb', aws_cpp_sdk_dynamodb_dep)

pkgs += {
    'aws-cpp-sdk-dynamodb': {
        'lib': libaws_cpp_sdk_dynamodb,
        'extra_cflags': public_cpp_args,
    }
}
